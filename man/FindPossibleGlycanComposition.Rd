% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/MainFunctions.R
\name{FindPossibleGlycanComposition}
\alias{FindPossibleGlycanComposition}
\title{Match MS2 Precursors to Potential Glycan Compositions}
\usage{
FindPossibleGlycanComposition(
  spectrum_info,
  glycan_lib,
  max_precursor_mz_ppm = precursor_mz_ppm_default,
  max_possible_candidates_num = max_possible_candidates_num_default
)
}
\arguments{
\item{spectrum_info}{A data frame containing spectrum metadata. Required columns
include: \code{"ms2_spectrum_id"}, \code{"ms2_precursor_charge"}, and \code{"ms2_precursor_mz"}.
Usually the output from \code{FindSpectrumByDiagnosticFragments}.}

\item{glycan_lib}{A data frame acting as the reference glycan library. It must contain
at least: \code{total_charge}, \code{glycan_monoisotopic_mz}, and composition details.}

\item{max_precursor_mz_ppm}{Numeric. The maximum allowable mass tolerance in ppm
between the observed precursor and the library entry. Default is 150.}

\item{max_possible_candidates_num}{Numeric. The maximum number of top-ranked
(by lowest ppm error) candidates to return for each MS2 spectrum. Default is 5.}
}
\value{
A data frame (\code{tibble}) containing the original spectrum information
joined with matched glycan candidates, their calculated \code{ppm_error},
and their chemical compositions.
}
\description{
This function takes the identified glycan spectra and searches a glycan library
for potential compositions based on the precursor m/z and charge state. It
calculates mass errors in ppm and returns the top candidates for each spectrum.
}
\details{
The function filters the library by charge state, calculates the ppm error for
each entry, and retains candidates within the specified tolerance. Results are
merged back with the original \code{spectrum_info} for easy downstream analysis.
}
\examples{
\dontrun{
# Assuming you have a glycan library and spectrum info
candidates <- FindPossibleGlycanComposition(
  spectrum_info = likely_glycan_spectrum_info,
  glycan_lib = N_glycan_library,
  max_precursor_mz_ppm = 50,
  max_possible_candidates_num = 3
)

# Inspect the top matches for the first spectrum
head(candidates)
}
}
