% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/SubFunctions.R
\name{GetSplineSparEvaValue}
\alias{GetSplineSparEvaValue}
\title{Evaluate Smoothing Spline Fitting Performance}
\usage{
GetSplineSparEvaValue(spline_fit_result, x_val, y_val, y_predict_val)
}
\arguments{
\item{spline_fit_result}{An object of class \code{smooth.spline} representing the fitted model.}

\item{x_val}{Numeric vector. The independent variable (typically sorted intensity or m/z) used for fitting.}

\item{y_val}{Numeric vector. The observed response variable (transformed intensity).}

\item{y_predict_val}{Numeric vector. The predicted values from the spline at the original \code{x_val} coordinates.}
}
\value{
A named list containing:
\itemize{
\item \code{RMSE}: Root Mean Square Error.
\item \code{CV}: LOOCV criterion (extracted from \code{spline_fit_result$cv.crit}).
\item \code{D1}: Total variation of the first derivative.
\item \code{D2}: Smoothness penalty based on the second derivative.
}
}
\description{
This function calculates multiple evaluation metrics for a fitted smoothing spline,
providing criteria to determine the optimal smoothing parameter (\code{spar}).
It evaluates both the goodness-of-fit and the smoothness of the resulting curve.
}
\details{
The function calculates four key metrics:
\itemize{
\item \bold{RMSE}: Root Mean Square Error, measuring the global deviation from observed data.
\item \bold{CV}: Leave-one-out Cross-Validation (LOOCV) score, representing the model's predictive power.
\item \bold{D1}: Total variation of the first derivative. Since the input data is typically sorted,
a smaller D1 indicates a more monotonic and less oscillatory curve.
\item \bold{D2}: The integral of the squared second derivative (\eqn{\int [f''(x)]^2 dx}),
which is the standard roughness penalty for cubic splines.
}
}
\examples{
\dontrun{
# Fit a spline
fit <- smooth.spline(x, y, spar = 0.5)
pred <- predict(fit, x)$y

# Evaluate fitting
metrics <- GetSplineSparEvaValue(
  spline_fit_result = fit,
  x_val = x,
  y_val = y,
  y_predict_val = pred
)
print(metrics$RMSE)
}
}
