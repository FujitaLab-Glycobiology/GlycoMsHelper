% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/MainFunctions.R
\name{SpectrumQcFilter}
\alias{SpectrumQcFilter}
\title{Quality Control Filtering for MS1 and MS2 Spectra}
\usage{
SpectrumQcFilter(
  ms_data,
  filter_method_ms1 = filter_method_ms1_default,
  filter_method_ms2 = filter_method_ms2_default,
  threshold_ms1 = threshold_ms1_default,
  threshold_ms2 = threshold_ms2_default,
  plot_option = plot_option_default
)
}
\arguments{
\item{ms_data}{A \code{Spectra} object containing the mass spectrometry data.}

\item{filter_method_ms1}{A named character vector specifying the filtering
method for MS1. Names must match \code{Spectra::spectraVariables(ms_data)}.
Methods: \code{'mean_sd'}, \code{'quantile_prob'}, or \code{'start_end'}.}

\item{filter_method_ms2}{A named character vector specifying the filtering
method for MS2. Similar to \code{filter_method_ms1}.}

\item{threshold_ms1}{A named list of thresholds for MS1.
\itemize{
\item For \code{'mean_sd'}: A single numeric value (n times SD).
\item For \code{'quantile_prob'}: A numeric vector of length 2 (lower and upper probabilities).
\item For \code{'start_end'}: A numeric vector of length 2 (min and max values).
}}

\item{threshold_ms2}{A named list of thresholds for MS2. Similar to \code{threshold_ms1}.}

\item{plot_option}{Logical, if \code{TRUE} (default), returns diagnostic plots
showing the distribution of variables before and after filtering.}
}
\value{
A list containing:
\itemize{
\item \code{filtered_ms_data}: The filtered \code{Spectra} object.
\item \code{pic_ms_varibles_unfiltered}: A list of ggplot objects showing raw distributions.
\item \code{pic_ms_varibles_filtered}: (Optional) A list of ggplot objects showing distributions after filtering.
}
}
\description{
This function filters raw mass spectrometry data by analyzing spectra variables
(such as peak count, total ion current, and retention time). It supports three
different filtering logic modes and provides visual feedback of the filtering process.
}
\details{
The function calculates thresholds dynamically if not provided.
For example, \code{'mean_sd'} identifies a "jump point" based on mean and standard deviation
to remove low-quality scans at the beginning or end of an LC-MS run.
}
\examples{
\dontrun{
# Example usage:
filter_methods <- c(peaksCount = 'mean_sd', totIonCurrent = 'quantile_prob')
thresholds <- list(peaksCount = 2, totIonCurrent = c(0.1, 0.9))

qc_result <- SpectrumQcFilter(
  ms_data = raw_spectra,
  filter_method_ms1 = filter_methods,
  threshold_ms1 = thresholds
)

# Access filtered data
clean_data <- qc_result$filtered_ms_data
}
}
