% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/MainFunctions.R
\name{MS2SpectrumDenoising}
\alias{MS2SpectrumDenoising}
\title{MS2 Spectrum Denoising using Regression or Thresholding Methods}
\usage{
MS2SpectrumDenoising(
  ms_data,
  ms2_spectrum_transform_method = "log2_transform",
  ms2_denoising_method = "spline_segmentation_regression",
  ms2_denoising_detail = ms2_denoising_detail_default
)
}
\arguments{
\item{ms_data}{A \code{Spectra} object containing MS1 and MS2 data.}

\item{ms2_spectrum_transform_method}{Character string or function.
Methods include \code{'log2_transform'} (default), \code{'asinh_transform'},
or \code{'non_transform'}. A custom function can also be provided.}

\item{ms2_denoising_method}{Character string specifying the denoising logic.
Options: \code{'spline_segmentation_regression'}, \code{'spline_regression'},
\code{'segmentation_regression'}, \code{'quantile_prob'}, or \code{'fixed_value'}.}

\item{ms2_denoising_detail}{A nested list containing parameters for the chosen
denoising method. See details for default values and structure.}
}
\value{
A list containing:
\itemize{
\item \code{denoising_regression_info}: A data frame (\code{tibble}) with
regression statistics and the calculated threshold for each MS2 spectrum.
\item \code{denoised_ms_data}: A \code{Spectra} object with the denoising
processing added via \code{Spectra::addProcessing}.
}
}
\description{
This function performs denoising on MS2 spectra using various methods, including
spline regression, segmented regression, and adaptive thresholding. It is
specifically designed to distinguish between complete and incomplete glycan
fragmentation to apply the most appropriate denoising strategy.
}
\details{
The \code{'spline_segmentation_regression'} method automatically detects the
fragmentation state. If fragmentation is incomplete (indicated by regular
m/z spacing of top peaks), spline regression is used. Otherwise, segmented
regression is applied.
}
\examples{
\dontrun{
# Use default settings (Spline + Segmentation)
result <- MS2SpectrumDenoising(ms_data = raw_data)

# Use a fixed intensity threshold for denoising
custom_detail <- ms2_denoising_detail_default
custom_detail$fixed_value <- 100
result_fixed <- MS2SpectrumDenoising(
  ms_data = raw_data,
  ms2_denoising_method = 'fixed_value',
  ms2_denoising_detail = custom_detail
)
}
}
